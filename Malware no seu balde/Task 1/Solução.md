# Desafio AWS Lambda: Escaneamento de Arquivos em Bucket S3

## Etapa 1: Examine os Recursos Fornecidos

Conforme mencionado na descrição do desafio, você recebeu:

- Uma **função Lambda** pré-criada: `bucket-scan-function`
- Um **bucket do S3** com nome `file-scan-upload-[random]`

### Verificação de Permissões

Analise a permissão do IAM anexada à função Lambda para garantir que ela possa recuperar objetos enviados ao bucket S3.

> A função `bucketScan` anexada à função Lambda **já tem permissão** para acessar objetos no bucket do S3. Portanto, **nenhuma mudança adicional é necessária** nesta etapa.

---

## Etapa 2: Adicionar o Lambda Trigger

### Via Interface da Função Lambda

1. Navegue até a página da função Lambda no Console AWS.
2. Use o **Designer Visual** para adicionar um novo acionador à função.
3. Clique em **"Adicionar Trigger"** e selecione **S3**.
4. No campo de nome do bucket, selecione o bucket: `file-scan-upload-[random]`.
5. Salve o gatilho.  
   > Você pode manter os valores padrão para outras configurações.

### Alternativa: Via Propriedades do Bucket S3

1. Abra a página do bucket S3 no Console AWS.
2. Vá para a guia **Propriedades**.
3. Role até **Notificações de eventos**.
4. Clique em **Criar notificação de evento**.
5. Escolha um nome qualquer para o evento.
6. Em **Tipos de evento**, selecione **"Todos os eventos de criação de objetos"**.

---

## Etapa 3: Teste a Função

1. Faça o **download** de uma cópia local do arquivo `test_file.txt`.
2. Faça o **upload** desse arquivo de volta para o bucket S3:  
   `file-scan-upload-[random]`

> Ao realizar o upload, o evento acionará a função Lambda, iniciando o processo de escaneamento do arquivo.

---

## Etapa 4: Visualize os Registros no Amazon CloudWatch

1. Vá até a página da função Lambda.
2. Selecione a aba **Monitoramento**.
3. Clique em **Visualizar registros no CloudWatch**.

> Isso abrirá o grupo de logs do CloudWatch referente à função Lambda.

Caso receba uma mensagem de erro, aguarde alguns minutos e tente novamente ou atualize a página.

### Exemplo de Registro Esperado

Ao acessar os fluxos de log, você verá entradas como:

```json
{
  "scan_performed": "Yes",
  "scan_result": "Detected",
  "detection_rule": ["..."]
}
